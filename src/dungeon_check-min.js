const checker=(r,[e,i],[n,t],[f,u],[c,o],h,k,[s,d])=>{const v=r[e]?.[i-k],a=r[e+k]?.[i],b=r[e-k]?.[i],g=r[e]?.[i+k],j=(n,t,v=h,a=e,b=i)=>checker(r,[n,t],[a,b],[f,u],[c,o],v,k,[s,d]),l=([e,i],n,t=1)=>{if(!n){if(r[e][i+k]&&r[e+k][i+k])return j(e+k,i+k,0,e+k,i);if(r[e][i+k*t]&&r[e+k][i+k*t])return l([e,i+k*t],0,t+1)}if(1==n){if(r[e-k][i]&&r[e-k][i+k])return j(e-k,i+k,1,e-k,i);if(r[e-k*t][i]&&r[e-k*t][i+k])return l([e-k*t,i],1,t+1)}if(2==n){if(r[e][i-k]&&r[e-k][i-k])return j(e-k,i-k,2,e-k,i);if(r[e][i-k*t]&&r[e-k][i-k*t])return l([e,i-k*t],2,t+1)}return r[e+k][i]&&r[e+k][i-k]?j(e+k,i-k,3,e+k,i):r[e+k*t][i]&&r[e+k*t][i-k]?l([e+k*t,i],3,t+1):void 0};return f==e&&u==i||!((e!=n||i!=t)&&e==c&&i==o||!(v||a||b||g))&&(h?1==h?e+k>s?j(e,i,2):v&&i&&i==t&&e>=n+k&&t!=i-k||v&&i==t-k?j(e,i-k):a&&n!=e+k?j(e+k,i):g?j(e,i+k):l([e,i],1):2==h?i+k>d?j(e,i,3):a&&e!=s&&e==n&&i>=t+k&&n!=e+k||a&&e==n+k?j(e+k,i):g?j(e,i+k):b?j(e-k,i):l([e,i],2):e-k<0?j(e,i,0):g&&i!=d&&i==t&&e<=n-k&&t!=i+k||g&&i==t+k?j(e,i+k):b?j(e-k,i):v?j(e,i-k):l([e,i],3):i-k<0?j(e,i,1):b&&e&&e==n&&i<=t-k&&n!=e-k||b&&e==n-k?j(e-k,i):v?j(e,i-k):a?j(e+k,i):l([e,i],0))};