const checker=(r,[e,n],[t,f],[u,c],[o,h],k,s,[d,v])=>{const a=r[e]?.[n-s],b=r[e+s]?.[n],g=r[e-s]?.[n],j=r[e]?.[n+s],l=(t,f,a=k,b=e,g=n)=>checker(r,[t,f],[b,g],[u,c],[o,h],a,s,[d,v],i+1),m=([e,i],n,t=1)=>{if(!n){if(r[e][i+s]&&r[e+s][i+s])return l(e+s,i+s,0,e+s,i);if(r[e][i+s*t]&&r[e+s][i+s*t])return m([e,i+s*t],0,t+1)}if(1==n){if(r[e-s][i]&&r[e-s][i+s])return l(e-s,i+s,1,e-s,i);if(r[e-s*t][i]&&r[e-s*t][i+s])return m([e-s*t,i],1,t+1)}if(2==n){if(r[e][i-s]&&r[e-s][i-s])return l(e-s,i-s,2,e-s,i);if(r[e][i-s*t]&&r[e-s][i-s*t])return m([e,i-s*t],2,t+1)}return r[e+s][i]&&r[e+s][i-s]?l(e+s,i-s,3,e+s,i):r[e+s*t][i]&&r[e+s*t][i-s]?m([e+s*t,i],3,t+1):void 0};return u==e&&c==n||!((e!=t||n!=f)&&e==o&&n==h||!(a||b||g||j))&&(k?1==k?e+s>d?l(e,n,2):a&&n&&n==f&&e>=t+s&&f!=n-s||a&&n==f-s?l(e,n-s):b&&t!=e+s?l(e+s,n):j?l(e,n+s):m([e,n],1):2==k?n+s>v?l(e,n,3):b&&e!=d&&e==t&&n>=f+s&&t!=e+s||b&&e==t+s?l(e+s,n):j?l(e,n+s):g?l(e-s,n):m([e,n],2):e-s<0?l(e,n,0):j&&n!=v&&n==f&&e<=t-s&&f!=n+s||j&&n==f+s?l(e,n+s):g?l(e-s,n):a?l(e,n-s):m([e,n],3):n-s<0?l(e,n,1):g&&e&&e==t&&n<=f-s&&t!=e-s||g&&e==t-s?l(e-s,n):a?l(e,n-s):b?l(e+s,n):m([e,n],0))};