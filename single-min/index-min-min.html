<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="stylesheet" href="https://use.typekit.net/qkd3qrc.css" /><title>Dungeon Not Found</title><style>.font-regular{font-family:lores-12, sans-serif;font-weight:400;font-style:normal;}.font-bold{font-family:lores-12, sans-serif;font-weight:700;font-style:normal;}body{background-color:black;}*{margin:0;}.container{position:relative;width:100%;z-index:500;max-width:720px;margin:auto;transition:0.3s ease-out opacity;}canvas{width:100%;position:absolute;top:0;left:0;}#gameBG{background-color:#949494;}.toggle-game{margin-top:75px;font-size:50px;}.invisible{opacity:0;pointer-events:none;}.headline{text-align:center;margin-top:100px;}h1{font-size:85px;color:wheat;position:relative;display:inline-block;height:85px;width:200px;}h2{margin-top:100px;font-size:60px;color:firebrick;}h1 span{position:absolute;animation:upAndDown 1s ease-in-out infinite both alternate;}h1 span:first-child{left:0;}h1 span:nth-child(2){left:37.5%;animation-delay:-0.3s;}h1 span:last-child{right:0;animation-delay:-0.6s;}@keyframes upAndDown{from{transform:translateY(0);}to{transform:translateY(75%);}}</style></head><body><div class="container invisible"><canvas id="gameBG" width="256" height="256"></canvas></div><div class="headline"><h1 class="font-bold"><span>4</span><span>0</span><span>4</span></h1><h2 class="font-bold">Dungeon Not Found</h2><button class="toggle-game font-regular">play</button></div><script>const game=document.getElementById("gameBG"),ctx=game.getContext("2d"),CANVAS_HEIGHT=256,CANVAS_WIDTH=256,NUMBER_OF_ROWS=16,NUMBER_OF_COLUMNS=16,ROWS=new Array(16).fill(),COLUMNS=new Array(16).fill(),TILE_HEIGHT=16,TILE_WIDTH=16,WALKABLE_TILE_CHANCE=0.8,COORDINATES={},WALKABLE_COORDINATES=[];const weapons=[["Brass knuckles","Fists"],[""],["Pistol","Rifle","Sniper"]],enemies=[["Skeleton","Vampire"],[""],[""]],rng=(t=4)=>Math.floor(Math.random()*t),roundUp=t=>{const e=t.toString().split(".")[1];return e&&parseInt(e.split("")[0])>=5?Math.round(t):t},Character=function(t,e){this.class=e,this.name=t,this.xp=0,this.lvl=1,this.hp=e?1==e?50:75:100,this.attack=e&&1==e?rng(3)+1:rng()+3,this.def=e?1==e?rng(2)+1:rng(3)+1:rng()+2,this.agility=e?1==e?rng(2)+1:rng()+1:rng(2)+1,this.speed=e&&1==e?rng(2)+3:rng()+4,this.fov=e?rng()+4:rng(2)+2,this.items=[],this.lvlUp=function(){xp>=404*lvl&&this.addStat()},this.weapons=weapons[this.class],this.addStat=function(t){switch(t){case 0:return this.attack=roundUp(1.2*this.attack);case 1:return this.agility=roundUp(1.1*this.agility);case 2:return this.def=roundUp(1.15*this.def);case 3:return this.speed=roundUp(1.1*this.speed)}},this.move=function(t){this.speed},this.attackEnemy=function(t){const e=t.agility<rng(100)&&this.attack>t.def;return e&&(t.hp=t.hp-this.attack+t.def),e?`You hit for ${this.attack-t.def}!`:this.name+" missed!"}},Enemy=function(t){const e=rng(100);this.class=e<60?0:e<85?2:1,this.name=enemies[this.class][rng(3)],this.hp=Math.floor(Math.sqrt(t*rng(100)))+t*rng(10),this.attack=t+rng(10)+1-2*this.class,this.def=t*rng()+t,this.fov=2*this.class+t,this.speed=0==this.class?6:1==this.class?3:4,this.xp=10*t+rng(20),this.atkChar=function(t){const e=t.agility<rng(100)&&t.def<this.attack;return e&&(t.hp=t.hp-this.attack+Math.floor(t.def)),t.def>=this.attack?`You blocked ${this.name}'s attack!`:e?`${this.name} hit for ${this.attack}!`:this.name+" missed!"},this.move=function(){new Array(this.speed).fill().map(t=>rng())}},rooms=[];let handleKeyPress,lvl=1,count=1,enemyPosition=[],playerCoord=[];const generatePlayer=(t,e,s,n,o)=>{handleKeyPress=t=>{handlePlayerMovement(t,s,n,e,o)},playerCoord=t,ctx.fillStyle=s[t[0]][t[1]]&&e,ctx.fillRect(t[0],t[1],n,n),window.addEventListener("keypress",handleKeyPress)},generateEnemies=(t,e,s,n)=>{count=t%2==0?Math.pow(t,2)/4:count,lvl++,enemyPosition=getEnemyCoordinate(e,s,n);const[o,i]=enemyPosition;ctx.fillStyle=n[o][i]&&"#940404",ctx.fillRect(o,i,TILE_WIDTH,TILE_HEIGHT)},getEnemyCoordinate=(t,e,s)=>{const n=Math.floor(Math.random()*NUMBER_OF_ROWS)*TILE_HEIGHT,o=Math.floor(Math.random()*NUMBER_OF_ROWS)*TILE_HEIGHT;return n!==t[0]&&o!==t[1]&&n!==e[0]&&o!==e[1]&&s[n][o]?[n,o]:getEnemyCoordinate(t,e,s)},handlePlayerMovement=(t,e,s,n,o)=>{if("KeyW"!=t.code&&"KeyD"!=t.code&&"KeyS"!=t.code&&"KeyA"!=t.code)return;let{key:i}=t;i=i.toLowerCase();let[a,r]=playerCoord;const l={w:{code:"w",coord:[a,r-s]},d:{code:"d",coord:[a+s,r]},s:{code:"s",coord:[a,r+s]},a:{code:"a",coord:[a-s,r]}},[h,c]=l[i].coord;e[h]?.[c]&&(ctx.clearRect(a,r,s,s),ctx.fillStyle=e[h][c]&&n,ctx.fillRect(h,c,s,s),playerCoord=[h,c]),handleEnemyMovement(e,enemyPosition),h==o[0]&&c==o[1]&&(window.removeEventListener("keypress",handleKeyPress),buildDungeon(CANVAS_HEIGHT,CANVAS_WIDTH,COLUMNS,ROWS,TILE_HEIGHT,TILE_WIDTH,[o[0],o[1]]))},handleEnemyMovement=(t,[e,s])=>{const n=[{pos:"top",coord:[e,s-TILE_WIDTH],available:t[e]?.[s-TILE_WIDTH]},{pos:"right",coord:[e+TILE_WIDTH,s],available:t[e+TILE_WIDTH]?.[s]},{pos:"bottom",coord:[e,s+TILE_WIDTH],available:t[e]?.[s+TILE_WIDTH]},{pos:"left",coord:[e-TILE_WIDTH,s],available:t[e-TILE_WIDTH]?.[s]}].filter(t=>t.available);ctx.clearRect(e,s,TILE_WIDTH,TILE_HEIGHT),enemyPosition=n[Math.floor(Math.random()*n.length)].coord;const[o,i]=enemyPosition;ctx.fillStyle=t[o][i]&&"#940404",ctx.fillRect(o,i,TILE_WIDTH,TILE_HEIGHT)};const checker=(e,[r,i],[f,t],[n,u],[l,s],c,a,[h,g],k=0)=>{if(++k>400)return;ctx.fillStyle=e[u]&&"#39e363",ctx.fillRect(n,u,a,a);const o=e[r]?.[i-a],x=e[r+a]?.[i],y=e[r-a]?.[i],m=e[r]?.[i+a],v=i==t,w=r==f,E=r==f+a,P=r==f-a,R=i==t+a,S=i==t-a,b=(f,t,o=c,x=r,y=i)=>checker(e,[f,t],[x,y],[n,u],[l,s],o,a,[h,g],k++);if(n==r&&u==i)return generatePlayer([l,s],"white",e,a,[n,u]),generateEnemies(lvl,[l,s],[n,u],e),!0;if(o||x||y||m)if(c)if(1!=c)if(2!=c)if(3!=c);else{if(r-a<0)return R&&x?b(r+a,i):i==g?b(r,i,0):m?b(r,i+a):b(r,i,0);if(w&&v)return y?b(r-a,i):b(r,i-a);if(w){if(S)return y?b(r-a,i):o?b(r,i-a):x?b(r+a,i):b(r,i+a);if(R)return 0==r?m?b(r,i+a):x?b(r+a,i):b(r,i+a):x?b(r+a,i):m?b(r,i+a):y?b(r-a,i):b(r,i-a)}else if(v){if(P)return 0==r?m?b(r,i+a):x?b(r-a,i):b(r,i-a):m?b(r,i+a):y?b(r-a,i):o?b(r,i-a):b(r+a,i);if(E)return o?b(r,i-a):x?b(r+a,i):m?b(r,i+a):b(r-a,i)}}else{if(i==g)return E&&o?b(r,i-a):r==h?b(r,i,3):x?b(r+a,i):b(r,i,3);if(w&&v)return m?b(r,i+a):b(r-a,i);if(w){if(S)return y?b(r-a,i):o?b(r,i-a):x?b(r+a,i):b(r,i+a);if(R)return r==h?m?b(r,i+a):y?b(r-a,i):b(r,i-a):x?b(r+a,i):m?b(r,i+a):y?b(r-a,i):b(r,i-a)}else if(v){if(P)return m?b(r,i+a):y?b(r-a,i):o?b(r,i-a):b(r+a,i);if(E)return 0==r?o?b(r,i-a):x?b(r+a,i):b(r,i+a):o?b(r,i-a):x?b(r+a,i):m?b(r,i+a):b(r-a,i)}}else{if(r==h)return S&&y?b(r-a,i):0==i?b(r,i,2):o?b(r,i-a):b(r,i,2);if(w&&v)return x?b(r+a,i):b(r,i+a);if(w){if(S)return i==g?b(y?r-a:r+a,i):y?b(r-a,i):o?b(r,i-a):x?b(r+a,i):b(r,i+a);if(R)return x?b(r+a,i):m?b(r,i+a):y?b(r-a,i):b(r,i-a)}else if(v){if(P)return r==h?o?b(r,i-a):b(y?r-a:r+a,i):m?b(r,i+a):y?b(r-a,i):o?b(r,i-a):b(r+a,i);if(E)return o?b(r,i-a):x?b(r+a,i):m?b(r,i+a):b(r-a,i)}}else{if(0==i)return P&&m?b(r,i+a):0==r?b(r,i,1):y?b(r-a,i):b(r,i,1);if(w&&v)return o?b(r,i-a):b(r+a,i);if(w){if(S)return 0==r?o?b(r,i-a):x?b(r+a,i):b(r,i+a):y?b(r-a,i):o?b(r,i-a):x?b(r+a,i):b(r,i+a);if(R)return 0==r?x?b(r+a,i):b(r,m?i+a:i-a):x?b(r+a,i):m?b(r,i+a):y?b(r-a,i):b(r,i-a)}else if(v){if(P)return 0===r?m?b(r,i+a):o?b(r,i-a):b(r+a,i):m?b(r,i+a):y?b(r-a,i):o?b(r,i-a):b(r+a,i);if(E)return o?b(r,i-a):x?b(r+a,i):m?b(r,i+a):b(r-a,i)}}};const buildDungeon=(t,n,E,o,c,I,[T,a])=>{ctx.clearRect(0,0,n,t);const r=n-I,O=t-c,[e,A]=(([t,n])=>t?n?241==t?[0,n]:[t,0]:[t,240]:[240,n])([T,a]);E.forEach((t,n)=>{n*=I,COORDINATES[n]={},o.forEach((t,E)=>{E*=c;const o=Math.random(),T=e===n&&A===E;COORDINATES[n][E]=o<=WALKABLE_TILE_CHANCE||T?1:0,ctx.fillStyle=1===COORDINATES[n][E]?"transparent":"#2b2b2b",ctx.fillRect(n,E,I,c)})});(()=>{const t=Math.floor(Math.random()*NUMBER_OF_ROWS)*TILE_HEIGHT;Math.random()})();if(!checker(COORDINATES,[e,A],[e,A],[0,240],[e,A],0==e?A>0?0:1:0==A?e<240?1:2:240==e?A<240?2:3:void 0,c,[r,O]))return buildDungeon(t,n,E,o,c,I,[T,a])};buildDungeon(CANVAS_HEIGHT,CANVAS_WIDTH,COLUMNS,ROWS,TILE_HEIGHT,TILE_WIDTH,[0,160]);const btn=document.body.querySelector(".toggle-game");btn.addEventListener("click",e=>{e.preventDefault(),document.body.querySelector(".container").classList.remove("invisible"),btn.classList.add("invisible")});</script></body></html>