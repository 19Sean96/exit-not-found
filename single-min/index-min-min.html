<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport"content="width=device-width,initial-scale=1.0"><link rel="stylesheet"href="https://use.typekit.net/qkd3qrc.css"><title>Exit Not Found</title><style>.fr{font-family:lores-12,sans-serif;font-weight:400;font-style:normal}.fb{font-family:lores-12,sans-serif;font-weight:700;font-style:normal}body{background-color:black}*{margin:0;box-sizing:border-box}.c{position:absolute;top:0;left:0;max-width:100vw;overflow-x:hidden;max-height:100vh;z-index:500;padding-top:6vh;display:flex;justify-content:space-evenly;align-items:flex-start;flex-wrap:wrap;transition:0.3s ease-out opacity}canvas{width:33vw;background-color:#949494;margin:10px}.es{width:26.5vw;color:#A70707;border:.24vw solid #A70707;margin:1.6vw;position:relative}.es h3{text-transform:capitalize;font-size:2vw}.es p{color:#F4B8B8;font-size:1.25vw}.es span,.es h4{color:#A70707;font-size:1.25vw}.esum{border-bottom:.24vw solid #A70707;padding:.8vw 1.3vw .8vw}.ed{padding:.8vw 1.3vw 3.2vw}.ei{margin:.4vw .4vw .8vw}.ei p{margin:.16vw 0 .16vw .8vw}.p{width:25vw;color:white}.p h3{color:#16c551;text-transform:capitalize;font-size:2vw}.p p{font-size:1.25vw;color:#b3ffcc;text-transform:capitalize}.p p span{color:#16c551}.ps,.pi{border:.24vw solid #16c551;padding:.8vw 1.37vw 3.2vw;margin:1.6vw;position:relative}.pl{position:absolute;right:0;top:1.4vw;right:.94vw;text-align:right}.pin,.pfd{margin:.8vw .4vw}.pfd{display:flex;flex-wrap:wrap;justify-content:space-between;color:#b3ffcc}.pfd div{width:50%;margin-bottom:.8vw}.pfd h4{text-transform:uppercase;font-size:1.25vw}.pfd p{text-transform:capitalize;margin-left:.012vw;color:#16c551}.pfd span{color:#16c551}.gd{text-align:center;color:#b3ffcc}.gd span{color:#b3ffcc!important}.act{width:70%;background-color:#1a1a1a;display:flex;height:17.5vh;max-height:200px;justify-content:space-evenly;align-items:center}.act button{font-size:2.8vw;font-family:inherit;text-transform:uppercase;cursor:pointer;height:60%;width:20%;color:white}#useItemBtn{background-color:#A76C07}#moveBtn{background-color:#07A732}#blockBtn{background-color:#0787A7}#attackBtn{background-color:#A70707}.toggle-game{margin-top:75px;font-size:50px}.invisible{visibility:hidden}.headline{text-align:center;margin-top:100px}h1{font-size:85px;color:wheat;position:relative;display:inline-block;height:85px;width:200px}h2{margin-top:100px;font-size:60px;color:firebrick}h1 span{position:absolute;animation:upAndDown 1s ease-in-out infinite both alternate}h1 span:first-child{left:0}h1 span:nth-child(2){left:37.5%;animation-delay:-0.3s}h1 span:last-child{right:0;animation-delay:-0.6s}.reset{position:absolute;top:0;right:0;margin:10px;font-size:12px;background-color:cornsilk;border:wheat solid 2px}@keyframes upAndDown{from{transform:translateY(0)}to{transform:translateY(75%)}}</style></head><body><div class="c invisible"><aside class="level-up invisible"><h5>you leveled up!</h5><h6>pick a skill to upgrade</h6><ul><li>Attack Strength<li>Defense<li>Agility<li>FOV</ul></aside><canvas id="gameBG" width="256" height="256"></canvas><div class="p fb"><section class="ps"><h3 class="fr">p stats</h3><div class="pl"><p>Level:<span id="pLvl">0</span><p>Experience:<br><span id="pExp">0</span>/<span id="nextExp">100</span></div><div class="pin"><p>üôÇ Name:<span id="pName">Jeff</span><p>‚ù§ Health:<span id="pHealthCurrent">100</span>/<span id="pHealthMax">100</span><p>üßç class:<span id="pClass">Melee</span></div><div class="pfd"><div><h4>üî™ Attack:</h4><p>strength:<span id="pAttackStrength">7</span><p>speed:<span id="pAttackSpeed">7</span></div><div><h4>üõ° Defense:<span id="pDefense">5</span></h4></div><div><h4>üèÉ Agility:<span id="pAgility">3</span></h4></div><div><h4>üî≠ FOV:<span id="pFOV">3</span></h4></div></div><div class="gd"><p>steps taken:<span id="steps">7</span><p>dungeon level:<span id="dungeon">7</span><p>act per turn:<span id="actLeft">0</span>/<span id="actPerTurn">0</span></div></section><section class="pi"><h3>items</h3></section></div><section class="es fb"><div class="esum"><h3 class="fr">Enemy Stats</h3><p>Total Enemies:<span id="totalEnemies">0</span></p><button id="attackBtn" class="invisible">attack</button></div><article class="ed"></article></section><section class="act fb"><button id="moveBtn">move</button><button id="blockBtn">block</button></section></div><div class="headline"><h1 class="fb"><span>4</span><span>0</span><span>4</span></h1><h2 class="fb">Exit Not Found</h2><button class="toggle-game fr">play</button></div><script>const rng=(a=4)=>Math.floor(Math.random()*a),getEl=document.querySelector,game=document.querySelector("#gameBG"),ctx=game.getContext("2d"),body=document.querySelector("body"),_btnStart=document.querySelector(".toggle-game"),_btnReset=document.querySelector(".reset"),_container=document.querySelector(".c"),_landing=document.querySelector(".headline"),_playerLvl=document.querySelector("#pLvl"),_expCurrent=document.querySelector("#pExp"),_expToNextLvl=document.querySelector("#nextExp"),_playerName=document.querySelector("#pName"),_healthpointsCurrent=document.querySelector("#pHealthCurrent"),_healthpointsMax=document.querySelector("#pHealthMax"),playerClass=document.querySelector("#pClass"),_playerAttackStrength=document.querySelector("#pAttackStrength"),_playerAttackSpeed=document.querySelector("#pAttackSpeed"),_playerDefense=document.querySelector("#pDefense"),_playerAgility=document.querySelector("#pAgility"),_playerFOV=document.querySelector("#pFOV"),_actionsTotal=document.querySelector("#actPerTurn"),_actionsLeft=document.querySelector("#actLeft"),_attackBtn=document.querySelector("#attackBtn"),_dungeon=document.querySelector("#dungeon"),_steps=document.querySelector("#steps"),_enemyDetails=document.querySelector(".ed"),NUMBER_OF_ROWS=16,NUMBER_OF_COLUMNS=16,CANVAS_HEIGHT=NUMBER_OF_COLUMNS*NUMBER_OF_COLUMNS,CANVAS_WIDTH=NUMBER_OF_ROWS*NUMBER_OF_ROWS,ROWS=Array(NUMBER_OF_ROWS).fill(),COLUMNS=Array(NUMBER_OF_COLUMNS).fill(),TILE_HEIGHT=CANVAS_HEIGHT/NUMBER_OF_ROWS,TILE_WIDTH=CANVAS_WIDTH/NUMBER_OF_ROWS,WALKABLE_TILE_CHANCE=.8;game.setAttribute("width",CANVAS_WIDTH),game.setAttribute("height",CANVAS_HEIGHT);const COORDINATES={},WALKABLE_COORDINATES=[];let player,handleKeyPress,enemyCount,steps=1,dungeon=1,dungeonEXP=20+10*dungeon,lvl=1,playerCoord=[],enemies=[],totalEnemyPower=100;const enemyPowerMult=()=>0;const inverseCoords=([a,b],c)=>a?b?a==c?[0,b]:[a,0]:[a,c]:[c,b],roundUp=a=>{const b=a.toString().split(".")[1];return b?5<=parseInt(b.split("")[0])?Math.round(a):a:a},generatePlayer=(a,b,c,d,f)=>{handleKeyPress=a=>handlePlayerMovement(a,c,d,b,f),playerCoord=a,ctx.fillStyle=c[a[0]][a[1]]&&b,ctx.fillRect(a[0],a[1],d,d),window.addEventListener("keypress",handleKeyPress)},generateEnemies=(a,b,c)=>{enemies=[],enemyCount=rng(a/2+2);for(let d=0;d<enemyCount;d++){const a=new Enemy(getEnemyStartCoordinate(b,c),~~(totalEnemyPower/enemyCount));enemies.push(a);const{coords:[d,e]}=a;COORDINATES[d][e].occupied=1,ctx.fillStyle=c[d][e]&&"#94040466",ctx.fillRect(d,e,TILE_WIDTH,TILE_HEIGHT)}player.checkFOV()},getEnemyStartCoordinate=(a,b)=>{const c=rng(NUMBER_OF_ROWS)*TILE_HEIGHT,d=rng(NUMBER_OF_ROWS)*TILE_HEIGHT;return 0!=c&&0!=d&&c!=a&&d!=a&&b[c]?.[d]?.walkable&&!b[c]?.[d]?.occupied?[c,d]:getEnemyStartCoordinate(a,b)},handlePlayerMovement=async(a,b,c,d,e)=>{if("KeyW"!=a.code&&"KeyD"!=a.code&&"KeyS"!=a.code&&"KeyA"!=a.code)return;let{key:f}=a;f=f.toLowerCase();let[g,h]=playerCoord;const[j,k]={w:[g,h-c],d:[g+c,h],s:[g,h+c],a:[g-c,h]}[f];b[j]?.[k].walkable&&!b[j]?.[k].occupied&&(console.log("you moved!"),enemies.length&&player.actionsLeft--,_actionsLeft.innerHTML=player.actionsLeft,ctx.clearRect(g,h,c,c),b[g][h].occupied=0,ctx.fillStyle=b[j][k].walkable&&d,ctx.fillRect(j,k,c,c),b[j][k].occupied=1,_steps.innerHTML=steps++,playerCoord=[j,k],!player.actionsLeft&&enemies.length&&(window.removeEventListener("keypress",handleKeyPress),setTimeout(()=>enemies.forEach((a,b)=>{let c=a.speed;const d=setInterval(()=>{a.handleTurn(e),c--,1>c&&(clearInterval(d),b==enemies.length-1&&window.addEventListener("keypress",handleKeyPress))},300)}),500),player.resetActions()));for(let f=0;f<e.length;f++)if(j==e[f][0]&&k==e[f][1])return window.removeEventListener("keypress",handleKeyPress),player.xp+=lvl,lvl++,enemyPowerMult(),0==lvl%10&&(player.xp+=100),player.checkIfNextLvl(),_expCurrent.textContent=player.xp,console.log("you win!"),player.resetActions(),buildDungeon(CANVAS_HEIGHT,CANVAS_WIDTH,COLUMNS,ROWS,TILE_HEIGHT,TILE_WIDTH,[e[f][0],e[f][1]]);player.checkFOV()},goFullScreen=()=>{body.requestFullscreen?body.requestFullscreen():body.mozRequestFullScreen?body.mozRequestFullScreen():body.webkitRequestFullscreen?body.webkitRequestFullscreen():body.msRequestFullscreen&&body.msRequestFullscreen()},generateRandomEndpoint=([c,d],a,b,e)=>{const f=0<e.length?[[c,d],...e.filter(([e,a])=>e!=c&&a!=d)]:[[c,d]],g=rng(a)*a,h=0==g||g==b?rng(a)*a:1<rng()?0:b,i=f.some(([a,c])=>(g==b||0==g)&&g==a||(h==b||0==h)&&h==c);return i?generateRandomEndpoint([c,d],a,b,f):[g,h]},dir=([a,b],c,d)=>{if(0==a)return 0<b?0:1;return 0==b?a<d+c?1:2:a==d?b<d+c?2:3:void 0};const weapons=[["Brass knuckles","Fists"],[""],["Pistol","Rifle","Sniper"]],enemyType=["Skeleton \uD83D\uDC80","Vampire \uD83E\uDDDB","Wizard \uD83E\uDDD9","Demon \uD83D\uDC79"],Character=function(a,b){const c=this;c.class=b,c.name=a,c.xp=0,c.nextLvl=100,c.lvl=1,c.hp=b?1==b?50:75:100,c.attackStrength=b&&1!=b?rng(3)+1:rng()+3,c.def=b?1==b?rng(2)+1:rng(3)+1:rng()+2,c.agility=b?1==b?rng(2)+1:rng(5)+3:rng()+2,c.actionsPerTurn=b?1==b?rng(2)+3:rng()+4:rng()+4,c.actionsLeft=c.actionsPerTurn,c.attackSpeed=Math.abs(c.attackStrength-c.actionsPerTurn),c.fov=b?rng()+4:rng(2)+2,c.items=[],c.checkIfNextLvl=function(){0>=c.nextLvl-c.xp?c.lvlUp():null},c.lvlUp=function(){c.nextLvl+=c.nextLvl+Math.pow(c.lvl,3),c.lvl++,_playerLvl.textContent=c.lvl,_expToNextLvl.textContent=player.nextLvl,c.addStat()},c.weapons=weapons[c.class],c.addStat=function(a){return 0===a?(c.attack=Math.ceil(1.2*c.attack),_attack.textContent=c.attack):1===a?(c.agility=Math.ceil(1.1*c.agility),_agility.textContent=c.agility):2===a?(c.def=Math.ceil(1.15*c.def),_defense.textContent=c.def):3===a?(c.actionsPerTurn=Math.ceil(1.1*c.actionsPerTurn),_speed.textContent=c.actionsPerTurn):void 0},c.currentCoord=[],c.move=function(){Math.abs(playerCoord[0]-c.currentCoord[0])/TILE_HEIGHT+Math.abs(playerCoord[1]-c.currentCoord[1])/TILE_HEIGHT},c.attackEnemy=function(a){const b=a.agility<rng(100)&&c.attack>a.def;return b?a.hp=a.hp-c.attack+a.def:0,b?`You hit for ${c.attack-a.def}!`:`${c.name} missed!`},c.inRange=[],c.checkFOV=function(){c.inRange=[],enemies.forEach(a=>{const b=Math.abs(a.coords[0]-playerCoord[0])/TILE_HEIGHT,d=Math.abs(a.coords[1]-playerCoord[1])/TILE_HEIGHT,e=Math.sqrt(b*b+d*d);if(e<=c.fov)return c.inRange.push(a)})},c.block,c.resetActions=function(){c.actionsLeft=c.actionsPerTurn,_actionsLeft.innerHTML=c.actionsLeft},c.turn=function(a,b=0,d){c.block=0,a?1==a?c.attackEnemy(b):2==a&&c.move(d):c.block+=c.turnSpeed}},Enemy=function(a,b){const c=this,d=rng(100);c.coords=a,c.class=60>d?0:85>d?2:1,c.name=enemyType[rng(3)],c.hp=Math.floor(Math.sqrt(b))+~~(b/10),c.attack=c.class&&1!=c.class?~~(b/(rng(11)+20)):Math.ceil(b/(rng(11)+10)),c.accuracy=c.class?1==c.class?60+rng(41):75+rng(6):65+rng(26),c.def=c.class?0:~~(b/(rng(21)+40)),c.fov=c.class?rng()+4:rng(2)+2,c.speed=0==c.class?6:1==c.class?3:4,c.playerSpotted=0,c.xp=b/5,c.atkChar=function(){const a=c.accuracy-player.agility>rng(100)&&player.def<c.attack;return a?player.hp=player.hp-c.attack+~~player.def:0,player.def>=c.attack?`You blocked ${c.name}'s attack!`:a?`${c.name} hit for ${c.attack}!`:`${c.name} missed!`},c.handleTurn=function(d){const[e,a]=c.coords,b=([c,a])=>{for(let b=0;b<d.length;b++)if(d[b][0]==c&&d[b][1]==a)return!0},f=[{pos:"top",coord:[e,a-TILE_WIDTH],available:COORDINATES[e]?.[a-TILE_WIDTH]?.walkable,occupied:COORDINATES[e]?.[a-TILE_WIDTH]?.occupied,checkIfExit:b("top",[e,a-TILE_WIDTH])},{pos:"right",coord:[e+TILE_WIDTH,a],available:COORDINATES[e+TILE_WIDTH]?.[a]?.walkable,occupied:COORDINATES[e+TILE_WIDTH]?.[a]?.occupied,checkIfExit:b("right",[e+TILE_WIDTH,a])},{pos:"bottom",coord:[e,a+TILE_WIDTH],available:COORDINATES[e]?.[a+TILE_WIDTH]?.walkable,occupied:COORDINATES[e]?.[a+TILE_WIDTH]?.occupied,checkIfExit:b("bottom",[e,a+TILE_WIDTH])},{pos:"left",coord:[e-TILE_WIDTH,a],available:COORDINATES[e-TILE_WIDTH]?.[a]?.walkable,occupied:COORDINATES[e]?.[a-TILE_WIDTH]?.occupied,checkIfExit:b("left",[e-TILE_WIDTH,a])}];let g=f.filter(a=>a.available&&!a.checkIfExit&&!a.occupied);if(player.checkFOV(),!c.checkFOV(c.playerSpotted)){if(c.playerSpotted){console.log(g);const[b,d]=[playerCoord[0]-e,playerCoord[1]-a];console.log(`DIFF COORD: ${[b,d]}`),g=g.filter(a=>"left"==a.pos?0>b:"right"==a.pos?0<b:"top"==a.pos?0>d:"bottom"==a.pos?0<d:void 0),console.log(g)}const b=rng(g.length);COORDINATES[e][a].occupied=0,ctx.clearRect(e,a,TILE_WIDTH,TILE_HEIGHT),c.coords=0<g.length?g[b].coord:c.coords;const{coords:[d,f]}=c;return ctx.fillStyle=COORDINATES[d]?.[f]?"#94040466":"transparent",ctx.fillRect(d,f,TILE_WIDTH,TILE_HEIGHT),COORDINATES[d][f].occupied=1}c.atkChar()},c.checkFOV=function(a=1){const b=Math.abs(c.coords[0]-playerCoord[0])/TILE_HEIGHT*a,d=Math.abs(c.coords[1]-playerCoord[1])/TILE_HEIGHT*a,e=~~Math.sqrt(b*b+d*d);return e<=this.fov?(c.playerSpotted=1,1):(c.playerSpotted=0,0)}};const checker=(r,[e,f],[i,n],[t,u],[l,s],a,c,[k,b],w=0)=>{if(++w>250)return;const h=r[e]?.[f-c]?.walkable,o=r[e+c]?.[f]?.walkable,d=r[e-c]?.[f]?.walkable,g=r[e]?.[f+c]?.walkable,j=f==n,m=e==i,p=e==i+c,q=e==i-c,v=f==n+c,x=f==n-c,y=(i,n,h=a,o=e,d=f)=>checker(r,[i,n],[o,d],[t,u],[l,s],h,c,[k,b],w++);if(t==e&&u==f)return!0;if(h||o||d||g)if(a)if(1!=a)if(2!=a)if(3!=a);else{if(16==e)return v&&o?y(e+c,f):f==b?y(e,f,0):g?y(e,f+c):y(e,f,0);if(m&&j)return d?y(e-c,f):y(e,f-c);if(m){if(x)return d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return 16==e?g?y(e,f+c):o?y(e+c,f):y(e,f+c):o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return 16==e?g?y(e,f+c):o?y(e-c,f):y(e,f-c):g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}else{if(f==b)return p&&h?y(e,f-c):e==k?y(e,f,3):o?y(e+c,f):y(e,f,3);if(m&&j)return g?y(e,f+c):y(e-c,f);if(m){if(x)return d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return e==k?g?y(e,f+c):d?y(e-c,f):y(e,f-c):o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return 16==e?h?y(e,f-c):o?y(e+c,f):y(e,f+c):h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}else{if(e==k)return x&&d?y(e-c,f):16==f?y(e,f,2):h?y(e,f-c):y(e,f,2);if(m&&j)return o?y(e+c,f):y(e,f+c);if(m){if(x)return f==b?y(d?e-c:e+c,f):d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return e==k?h?y(e,f-c):y(d?e-c:e+c,f):g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}else{if(16==f)return q&&g?y(e,f+c):16==e?y(e,f,1):d?y(e-c,f):y(e,f,1);if(m&&j)return h?y(e,f-c):y(e+c,f);if(m){if(x)return 16==e?h?y(e,f-c):o?y(e+c,f):y(e,f+c):d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return 16==e?o?y(e+c,f):y(e,g?f+c:f-c):o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return 16==e?g?y(e,f+c):h?y(e,f-c):y(e+c,f):g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}};const buildDungeon=(a,b,c,d,e,f,[g,h])=>{ctx.clearRect(0,0,b,a);const j=e*f-e,[k,l]=inverseCoords([g,h],j),m=[];for(let n=rng(3)+1;0<n;n--)m.push(generateRandomEndpoint([k,l],e,j,m));c.forEach((a,c)=>{const b=c;c*=f,COORDINATES[c]={},d.forEach((a,d)=>{let g,h;const i=d;d*=e;const n=Math.random(),o=k===c&&l===d;if(m.forEach(([e,a])=>{e==c&&a==d&&(g=e,h=a)}),COORDINATES[c][d]={},g==c){COORDINATES[c][d].walkable=1;let a;0==g?a=ctx.createLinearGradient(-20,0,20,0):g==j?a=ctx.createLinearGradient(240,0,260,0):0==h?a=ctx.createLinearGradient(0,-20,0,20):h==j&&(a=ctx.createLinearGradient(0,240,0,260)),0==c||0==d?(a.addColorStop(.2,"black"),a.addColorStop(1,"yellow")):(a.addColorStop(1,"black"),a.addColorStop(0,"yellow")),ctx.fillStyle=a,ctx.fillRect(c,d,f,e)}else 0==b||0==i||d==j||c==j?(COORDINATES[c][d].walkable=k==c&&l==d?1:0,ctx.fillStyle=k==c&&l==d?"white":"#1c1c1c",ctx.fillRect(c,d,f,e)):c<=j&&d<=j&&(COORDINATES[c][d].walkable=n<=WALKABLE_TILE_CHANCE||o?1:0,COORDINATES[c][d].walkable?null:COORDINATES[c][d].occupied=1,ctx.fillStyle=1===COORDINATES[c][d].walkable?"transparent":"#2b2b2b",ctx.fillRect(c,d,f,e))})});let n;for(let o=0;o<m.length;o++)if(checker(COORDINATES,[k,l],[k,l],m[o],[k,l],dir([k,l],e,j),e,[j,j])){n=!0;break}return n?void(generatePlayer([k,l],"white",COORDINATES,e,m),generateEnemies(lvl,j,COORDINATES,m),_dungeon.innerHTML=dungeon++):buildDungeon(a,b,c,d,e,f,[g,h])};_btnStart.addEventListener("click",e=>{_container.classList.remove("invisible"),_landing.classList.add("invisible"),_btnStart.classList.add("invisible"),player=new Character("slimey",0),_healthpointsCurrent.innerHTML=player.hp,_healthpointsMax.innerHTML=player.hp,_playerLvl.innerHTML=player.lvl,_playerAttackStrength.innerHTML=player.attackStrength,_playerAttackSpeed.innerHTML=player.speed,_playerDefense.innerHTML=player.def,_playerAgility.innerHTML=player.agility,_playerFOV.innerHTML=player.fov,_actionsTotal.innerHTML=player.actionsPerTurn,_actionsLeft.innerHTML=player.actionsLeft,buildDungeon(CANVAS_HEIGHT,CANVAS_WIDTH,COLUMNS,ROWS,TILE_HEIGHT,TILE_WIDTH,[0,160])}),game.addEventListener("click",e=>{_enemyDetails.innerHTML="";const{top:n,left:a}=game.getBoundingClientRect(),t=game.width/e.target.clientWidth,i=(e.clientX-a)*t,r=(e.clientY-n)*t,l=enemies.filter(e=>checkIfEnemyCoord([i,r],e.coords));l.length?showEnemyDetails(l):_attackBtn.classList.add("invisible")});const showEnemyDetails=e=>e.map(e=>{const n=document.createElement("section");n.classList.add("enemy-item");const a=document.createElement("h4");a.innerHTML=e.name,n.append(a);const t=e.class?1==e.class?"magic":"ranged":"melee";n.append(createParSpanPair("üßç Class: ",t)),n.append(createParSpanPair("üî™ Attack Strength: ",e.attack)),n.append(createParSpanPair("üõ° Defense: ",e.def)),n.append(createParSpanPair("üî≠ FOV: ",e.fov)),player.inRange.length>0?_attackBtn.classList.remove("invisible"):_attackBtn.classList.add("invisible"),_enemyDetails.append(n)}),createParSpanPair=(e,n)=>{const a=document.createElement("p"),t=document.createElement("span");return a.innerHTML=e,t.innerHTML=n,a.append(t),a},checkIfEnemyCoord=([e,n],[a,t])=>e>=a&&n>=t&&e<a+TILE_WIDTH&&n<t+TILE_WIDTH;</script></body></html>