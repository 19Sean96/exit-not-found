const checker=(r,[e,f],[i,n],[t,u],[l,s],a,c,[k,b],w=0)=>{if(++w>250)return;const h=r[e]?.[f-c]?.walkable,o=r[e+c]?.[f]?.walkable,d=r[e-c]?.[f]?.walkable,g=r[e]?.[f+c]?.walkable,j=f==n,m=e==i,p=e==i+c,q=e==i-c,v=f==n+c,x=f==n-c,y=(i,n,h=a,o=e,d=f)=>checker(r,[i,n],[o,d],[t,u],[l,s],h,c,[k,b],w++);if(t==e&&u==f)return!0;if(h||o||d||g)if(a)if(1!=a)if(2!=a)if(3!=a);else{if(16==e)return v&&o?y(e+c,f):f==b?y(e,f,0):g?y(e,f+c):y(e,f,0);if(m&&j)return d?y(e-c,f):y(e,f-c);if(m){if(x)return d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return 16==e?g?y(e,f+c):o?y(e+c,f):y(e,f+c):o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return 16==e?g?y(e,f+c):o?y(e-c,f):y(e,f-c):g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}else{if(f==b)return p&&h?y(e,f-c):e==k?y(e,f,3):o?y(e+c,f):y(e,f,3);if(m&&j)return g?y(e,f+c):y(e-c,f);if(m){if(x)return d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return e==k?g?y(e,f+c):d?y(e-c,f):y(e,f-c):o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return 16==e?h?y(e,f-c):o?y(e+c,f):y(e,f+c):h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}else{if(e==k)return x&&d?y(e-c,f):16==f?y(e,f,2):h?y(e,f-c):y(e,f,2);if(m&&j)return o?y(e+c,f):y(e,f+c);if(m){if(x)return f==b?y(d?e-c:e+c,f):d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return e==k?h?y(e,f-c):y(d?e-c:e+c,f):g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}else{if(16==f)return q&&g?y(e,f+c):16==e?y(e,f,1):d?y(e-c,f):y(e,f,1);if(m&&j)return h?y(e,f-c):y(e+c,f);if(m){if(x)return 16==e?h?y(e,f-c):o?y(e+c,f):y(e,f+c):d?y(e-c,f):h?y(e,f-c):o?y(e+c,f):y(e,f+c);if(v)return 16==e?o?y(e+c,f):y(e,g?f+c:f-c):o?y(e+c,f):g?y(e,f+c):d?y(e-c,f):y(e,f-c)}else if(j){if(q)return 16==e?g?y(e,f+c):h?y(e,f-c):y(e+c,f):g?y(e,f+c):d?y(e-c,f):h?y(e,f-c):y(e+c,f);if(p)return h?y(e,f-c):o?y(e+c,f):g?y(e,f+c):y(e-c,f)}}};