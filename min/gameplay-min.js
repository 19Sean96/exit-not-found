_btnStart.addEventListener("click",e=>{_container.classList.remove("invisible"),_landing.classList.add("invisible"),_btnStart.classList.add("invisible"),player=new Character("slimey",0),_healthpointsCurrent.innerHTML=player.hp,_healthpointsMax.innerHTML=player.hp,_playerLvl.innerHTML=player.lvl,_playerAttackStrength.innerHTML=player.attackStrength,_playerAttackSpeed.innerHTML=player.speed,_playerDefense.innerHTML=player.def,_playerAgility.innerHTML=player.agility,_playerFOV.innerHTML=player.fov,_actionsTotal.innerHTML=player.actionsPerTurn,_actionsLeft.innerHTML=player.actionsLeft,buildDungeon(CANVAS_HEIGHT,CANVAS_WIDTH,COLUMNS,ROWS,TILE_HEIGHT,TILE_WIDTH,[0,160])}),game.addEventListener("click",e=>{_enemyDetails.innerHTML="";const{top:n,left:a}=game.getBoundingClientRect(),t=game.width/e.target.clientWidth,i=(e.clientX-a)*t,r=(e.clientY-n)*t,l=enemies.filter(e=>checkIfEnemyCoord([i,r],e.coords));l.length?showEnemyDetails(l):_attackBtn.classList.add("invisible")});const showEnemyDetails=e=>e.map(e=>{const n=document.createElement("section");n.classList.add("enemy-item");const a=document.createElement("h4");a.innerHTML=e.name,n.append(a);const t=e.class?1==e.class?"magic":"ranged":"melee";n.append(createParSpanPair("🧍 Class: ",t)),n.append(createParSpanPair("🔪 Attack Strength: ",e.attack)),n.append(createParSpanPair("🛡 Defense: ",e.def)),n.append(createParSpanPair("🔭 FOV: ",e.fov)),player.inRange.length>0?_attackBtn.classList.remove("invisible"):_attackBtn.classList.add("invisible"),_enemyDetails.append(n)}),createParSpanPair=(e,n)=>{const a=document.createElement("p"),t=document.createElement("span");return a.innerHTML=e,t.innerHTML=n,a.append(t),a},checkIfEnemyCoord=([e,n],[a,t])=>e>=a&&n>=t&&e<a+TILE_WIDTH&&n<t+TILE_WIDTH;